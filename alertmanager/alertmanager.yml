global:
  resolve_timeout: 5m

# Silence repeated alerts â€” group + wait before sending
route:
  group_by: [alertname, severity]
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 1h
  receiver: webhook-default

  routes:
    # Critical alerts fire immediately, repeat every 30 minutes
    - matchers:
        - severity = critical
      receiver: webhook-default
      group_wait: 10s
      repeat_interval: 30m

receivers:
  - name: webhook-default
    webhook_configs:
      # Replace with your Slack incoming webhook, Teams connector, or any HTTP endpoint
      # Example (Slack): https://hooks.slack.com/services/T.../B.../...
      - url: "http://localhost:9999/alerts"
        send_resolved: true

inhibit_rules:
  # If BackendDown is firing, suppress lower-severity alerts for the same job
  - source_matchers:
      - alertname = BackendDown
      - severity = critical
    target_matchers:
      - severity = warning
    equal: [job]
